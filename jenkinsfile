  pipeline {
    agent any
    options {
        skipDefaultCheckout true
    } 
    stages {
        stage("SCM Checkout") {
            steps {
             script {
            checkout scm
             }
            }
        }

		stage ('Compile-Package'){
            steps {
		bat "mvn -version"
        bat  "mvn clean install"
     }
    }
   }
       post {
        always {
            archiveArtifacts artifacts: 'target/*.jar', fingerprint: true
        }
       }
     stage('Add jar to docker image') {
      steps{
        FROM openjdk:8-jre-alpine3.9
        COPY target/gs-maven-0.1.0.jar /gs-maven-docker-0.1.0.jar
        CMD ["java", "-jar", "/gs-maven-docker-0.1.0.jar"]
      }
    }
}